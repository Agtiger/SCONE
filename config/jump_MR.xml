<?xml version="1.0" encoding="utf-8"?>
<Optimizer type="CmaOptimizer">
	<INCLUDE file="optimizations/O_CMA.xml" merge_children="1"/>
	<maximize_objective>1</maximize_objective>
	<Objective type="SimulationObjective">
		<signature_postfix>MR1</signature_postfix>
		<max_duration>5</max_duration>
		<Model type="Simbody">
			<model_file>f1024.osim</model_file>
			<!--state_init_file>f2354_init_walk_2_S12.sto</state_init_file-->
			<sensor_delay_scaling_factor>1.0</sensor_delay_scaling_factor>
			<integration_method>SemiExplicitEuler2</integration_method>
			<integration_accuracy>0.001</integration_accuracy>
			<use_fixed_control_step_size>1</use_fixed_control_step_size>
			<fixed_control_step_size>0.001</fixed_control_step_size>
			<Controllers>
				<Controller type="TimeStateController">
					<TimeStates>
						<State name="Bend" start_time="0"/>
						<State name="Jump">
							<start_time init_mean="0.1" init_std=".01" min="0" max="1" is_free="1"/>
						</State>
					</TimeStates>
					<ConditionalControllers>
						<ConditionalController states="Bend">
							<Controller type="MetaReflexController">
								<Reflexes>
									<Reflex type="MetaReflex" target="lumbar_extension" delay="0.005">
										<reference_pos init_mean="-45" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.3" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="hip_flexion" delay="0.005">
										<reference_pos init_mean="90" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.3" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="knee_angle" delay="0.010">
										<reference_pos init_mean="-45" init_std="5" min="-120" max="90" is_free="1"/>
										<length_gain init_mean="0.3" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="ankle_angle" delay="0.010">
										<reference_pos init_mean="90" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.3" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
								</Reflexes>
							</Controller>
						</ConditionalController>
							
						<ConditionalController states="Jump">
							<Controller type="MetaReflexController">
								<Reflexes>
									<Reflex type="MetaReflex" target="lumbar_extension" delay="0.005">
										<reference_pos init_mean="0" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.5" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="hip_flexion" delay="0.005">
										<reference_pos init_mean="0" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.5" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="knee_angle" delay="0.010">
										<reference_pos init_mean="0" init_std="5" min="-120" max="90" is_free="1"/>
										<length_gain init_mean="0.5" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
									<Reflex type="MetaReflex" target="ankle_angle" delay="0.010">
										<reference_pos init_mean="-60" init_std="5" min="-120" max="120" is_free="1"/>
										<length_gain init_mean="0.5" init_std="0.1" min="0" max="1" is_free="1"/>
									</Reflex>
								</Reflexes>
							</Controller>
						</ConditionalController>
					</ConditionalControllers>
				</Controller>
				<INCLUDE file="measures/M_Jump.xml"/>
			</Controllers>
		</Model>
	</Objective>
</Optimizer>
