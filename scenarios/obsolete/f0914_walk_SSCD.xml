<?xml version="1.0" encoding="utf-8"?>
<Optimizer type="CmaOptimizer">
	<init_file></init_file>
	<use_init_file>0</use_init_file>
	<random_seed>123</random_seed>
	<Objective type="SimulationObjective">
		<signature_postfix>SSC2</signature_postfix>
		<max_duration>10</max_duration>
		<Model type="Simbody">
			<model_file>f0914.osim</model_file>
			<state_init_file>f2354_init_walk_3_S10.sto</state_init_file>
			<state_init_optimization include_states="*" exclude_states="*_tx;*_ty;*_u" init_std="0.01" min="-0.5" max="0.5"/>
			<integration_method>SemiExplicitEuler2</integration_method>
			<integration_accuracy>0.001</integration_accuracy>
			<use_fixed_control_step_size>1</use_fixed_control_step_size>
			<fixed_control_step_size>0.001</fixed_control_step_size>
			<sensor_delay_scaling_factor>1.0</sensor_delay_scaling_factor>
			<ModelProperties>
				<Actuator name="tib_ant*" delay="0.02"/>
				<Actuator name="gastroc*" delay="0.02"/>
				<Actuator name="soleus*" delay="0.02"/>
				<Actuator name="vasti*" delay="0.01"/>
				<Actuator name="hamstrings*" delay="0.005"/>
				<Actuator name="iliopsoas*" delay="0.005"/>
				<Actuator name="glut_max*" delay="0.005"/>
			</ModelProperties>
			<Controllers>
				<Controller type="SensorStateController">
					<SensorStates>
						<State name="LeftSwing">
							<load_delta init_mean="-1" init_std="0.1" is_free="1"/>
							<sag_delta init_mean="-0.5" init_std="0.1" is_free="1"/>
						</State>
					</SensorStates>
					<ConditionalControllers>
						<ConditionalController states="LeftSwing">
							<Controller type="ReflexController">
								<Reflexes>
									<!-- Swing TA -->
									<Reflex type="MuscleReflex" target="tib_ant_l" delay="0.02">
										<KL init_mean="3.0" init_std="0.3" min="0" max="10.0" is_free="1"/>
										<L0 init_mean="0.7" init_std="0.07" min="0" max="2" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="tib_ant_l" source="soleus_l" delay="0.02">
										<KF init_mean="-0.4" init_std="0.04" min="-10" max="10" is_free="1"/>
									</Reflex>

									<!-- Stance TA -->
									<Reflex type="MuscleReflex" target="tib_ant_r" delay="0.02">
										<KL init_mean="3.0" init_std="0.3" min="0" max="10.0" is_free="1"/>
										<L0 init_mean="0.7" init_std="0.07" min="0" max="2" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="tib_ant_r" source="soleus_r" delay="0.02">
										<KF init_mean="-0.4" init_std="0.04" min="-10" max="10" is_free="1"/>
									</Reflex>

									<!-- Stance SOL/GAS -->
									<Reflex type="MuscleReflex" target="soleus_r" delay="0.02">
										<KF init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
										<KL init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="gastroc_r" delay="0.02">
										<KF init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
										<KL init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
									</Reflex>

									<!-- Swing SOL/GAS -->
									<Reflex type="MuscleReflex" target="soleus_l" delay="0.02">
										<KF init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
										<KL init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="gastroc_l" delay="0.02">
										<KF init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
										<KL init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
									</Reflex>

									<!-- Stance VAS -->
									<Reflex type="ConditionalMuscleReflex" target="vasti_r" delay="0.01">
										<KF init_mean="1.0" init_std="0.1" min="0.0" max="10.0" is_free="1"/>
										<C0 init_mean="0.05" init_std="0.005" min="-1.0" max="1.0" is_free="1"/>
										<Condition dof="knee_angle_r">
											<pos_range min="-180" max="-10"/>
										</Condition>
									</Reflex>
									
									<!-- Stance Root stability -->
									<Reflex type="DofReflex" target="hamstrings_r" source="pelvis_tilt" delay="0.005">
										<KP init_mean="1.0" init_std="0.1" min="-10" max="10" is_free="1"/>
										<KV init_mean="0.2" init_std="0.02" min="-10" max="10" is_free="1"/>
										<C0 init_mean="0.1" init_std="0.01" min="-1.0" max="1.0" is_free="1"/>
									</Reflex>
									<Reflex type="DofReflex" target="glut_max_r" source="pelvis_tilt" delay="0.005">
										<KP init_mean="1.0" init_std="0.1" min="-10" max="10" is_free="1"/>
										<KV init_mean="0.2" init_std="0.02" min="-10" max="10" is_free="1"/>
										<C0 init_mean="0.1" init_std="0.01" min="-1.0" max="1.0" is_free="1"/>
									</Reflex>
									<Reflex type="DofReflex" target="iliopsoas_r" source="pelvis_tilt" delay="0.005">
										<KP init_mean="-3.0" init_std="0.3" min="-10" max="10" is_free="1"/>
										<KV init_mean="-0.5" init_std="0.05" min="-10" max="10" is_free="1"/>
										<C0 init_mean="0.1" init_std="0.01" min="-1.0" max="1.0" is_free="1"/>
									</Reflex>
									
									<!-- Swing HFL -->
									<Reflex type="MuscleReflex" target="iliopsoas_l" delay="0.005">
										<KL	init_mean="0.5" init_std="0.05" min="0.0" max="10.0" is_free="1"/>
										<L0 init_mean="0.65" init_std="0.065" min="0" max="2" is_free="1"/>
									</Reflex>
									<Reflex type="DofReflex" target="iliopsoas_l" source="pelvis_tilt" delay="0.005">
										<KP init_mean="1.0" init_std="0.1" min="-10" max="10" is_free="1"/>
										<KV init_mean="0.5" init_std="0.05" min="-10" max="10" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="iliopsoas_l" source="hamstrings_l" delay="0.005">
										<KL	init_mean="-4.0" init_std="0.4" min="-10.0" max="10.0" is_free="1"/>
										<L0 init_mean="0.85" init_std="0.085" min="0" max="2" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="hamstrings_l" delay="0.005">
										<KF init_mean="0.65" init_std="0.065" min="0.0" max="10.0" is_free="1"/>
									</Reflex>
									<Reflex type="MuscleReflex" target="glut_max_l" delay="0.005">
										<KF init_mean="0.5" init_std="0.05" min="0.0" max="10.0" is_free="1"/>
									</Reflex>
								</Reflexes>
							</Controller>						
						</ConditionalController>
					</ConditionalControllers>
				</Controller>
				<INCLUDE file="measures/M_CG05_CoT_GH.xml"/>
			</Controllers>
		</Model>
	</Objective>
</Optimizer>
